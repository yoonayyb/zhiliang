# Git 分支管理

## 分支规范

| 名称    | 权限            | 唯一 | 描述                                                                                     |
| ------- | --------------- | :--: | ---------------------------------------------------------------------------------------- |
| master  | 管理员          |  ✅  | 主干分支，对外发布分支                                                                   |
| release | 管理员          |  ✅  | 发布分支，当确定需要发布版本时，从`develop`分支拉出此分支                                |
| develop | 管理员/开发人员 |  ✅  | 开发分支，团队成员的代码提交到此分支                                                     |
| feature | 管理员/开发人员 |  🚫  | 功能分支，当有新需求时，可以从`develop`分支拉出此分支，开发完成后，merge 到`develop`分支 |
| hotfix  | 管理员/开发人员 |  🚫  | 修复分支，从`master`拉出此分支，merge 到`master`和`develop`分支                          |

## 场景分解

- 新项目启动

  | 负责人 | 操作                       |
  | :----- | :------------------------- |
  | 管理员 | 创建仓库，创建`master`分支 |

- 启动开发

  | 负责人   | 操作                    |
  | :------- | :---------------------- |
  | 管理员   | 创建`develop`分支       |
  | 开发人员 | 同步和提交`develop`分支 |

- 功能开发

  | 负责人   | 操作                                                                                       |
  | :------- | :----------------------------------------------------------------------------------------- |
  | 管理员   | 从`develop`创建`feature`分支并指派`feature`负责人                                          |
  | 开发人员 | 同步和提交`feature`分支，多人同时开发时，可从此分支再建个人分支，最后合并到`feature`分支中 |
  | 管理员   | 开发测试完成后，合并`feature`分支到`develop`分支                                           |

- 版本发布

  | 负责人   | 操作                                                                                   |
  | :------- | :------------------------------------------------------------------------------------- |
  | 管理员   | 从`master`分支创建`release`分支，将`feature`分支或`develop`分支合并到`release`分支     |
  | 开发人员 | 同步和提交`release`分支，只允许提交 bug 修改代码，不允许提交新功能代码                 |
  | 开发人员 | 同步`release`分支的 bug 修改代码到`develop`分支                                        |
  | 管理员   | `release`测试通过后，同步`release`分支到`master`分支和`develop`分支，删除`release`分支 |

- BUG 修复

  | 负责人   | 操作                                                                                     |
  | :------- | :--------------------------------------------------------------------------------------- |
  | 管理员   | 从`master`创建`hotfix`分支并指派`hotfix`负责人                                           |
  | 开发人员 | 同步和提交`hotfix`分支，多人同时开发时，可从此分支再建个人分支，最后合并到`hotfix`分支中 |
  | 管理员   | 开发测试完成后，合并`hotfix`分支到`master`分支和`develop`分支                            |

## 更新日志

> 更新日志写法规范  
> 每次发布都需要写更新内容

> 说明：  
> `版本：1.0.0`：此次发布上线的版本号  
> `节点：812dba7784703d6e55dcb104313be0f73bf74241`：每次`commit`或`merge`分支后的节点 ID  
> `提交人：@realm`：该功能开发者，通过`@`可关联 GitLab 上的用户帐号

> `commit id`获取方式：  
> 1.可通过`git log`查看  
> 2.可通过`GitKraken`工具复制节点的 commit id  
> 3.可到 GitLab 仓库提交历史中复制 commit id

```markdown
## 2020-08-01

> 版本：1.0.0  
> 节点：812dba7784703d6e55dcb104313be0f73bf74241  
> 提交人：@realm

### 新增（Features：新增功能）

- 事项描述 A
- 事项描述 B

### 修复（Fixed：修复 bug）

- 事项描述 A
- 事项描述 B
- 事项描述 C

### 变更（Changed：对于某些已存在功能所发生的逻辑变化）

- 事项描述 A

### 优化（Refactored：性能或结构上的优化，并未带来功能的逻辑变化）

- 事项描述 A
- 事项描述 B
- 事项描述 C
- 事项描述 D

### 即将删除（Deprecated：不建议使用 / 在以后的版本中即将删除的功能）

- 事项描述 A

### 删除（Removed：已删除的功能）

- 事项描述 A
- 事项描述 B
```

---

- [👉 点击查看示例](git-changelog.md)
